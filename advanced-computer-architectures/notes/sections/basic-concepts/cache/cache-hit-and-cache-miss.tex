\subsubsection{Cache Hit and Cache Miss}

Unfortunately, the Cache can't be maintain every data inside the computer. In order to be faster, it contains only some data with.

\highspace
When the processor makes a request of a certain type:
\begin{itemize}
    \item \textcolor{Green3}{\textbf{\emph{Ideal case}}}. If the \textbf{requested data is \underline{found} in one of the cache blocks} (upper level), then there is a hit in the cache address and it's called \definition{Cache Hit}.

    \item \textcolor{Red2}{\textbf{\emph{Problematic case}}}. If the \textbf{requested data is \underline{not found} in one of the cache blocks} (upper level), then there is a miss in the cache address and it's called \definition{Cache Miss}.

    \underline{But beware}, in this case we need to access the lower level of the memory hierarchy to find the requested block. This causes:
    \begin{itemize}
        \item \textbf{To stall the CPU};
        \item To require to block from the main memory;
        \item To copy (write) the block in cache;
        \item To repeat the cache access (hit).
    \end{itemize}
\end{itemize}

\begin{definitionbox}[: Cache Hit]
    A \definition{cache hit} is when a requested data is found in one of the cache block of the upper level of the memory.
\end{definitionbox}

\noindent
Furthermore we define the \definition{Hit Rate} as the \textbf{number of memory accesses that find the data in the upper level with respect to the total number of memory accesses}:
\begin{equation*}
    \texttt{Hit Rate} = \dfrac{\texttt{\# hits}}{\# memory accesses}
\end{equation*}
Finally we define the \definition{Hit Time} as the \textbf{time to access the data in the upper level of the hierarchy}, \textbf{including the time needed to decide} if the attempt of access will result in a hit or miss.


\begin{definitionbox}[: Cache Miss]
    A \definition{cache miss} is when a requested data is not found in one of the cache blocks and must be taken from the lower level of the memory.
\end{definitionbox}

\noindent
Furthermore we define the \definition{Miss Rate} as the \textbf{number of memory accesses not finding the data in the upper level with respect to the total number of memory accesses}:
\begin{equation*}
    \texttt{Miss Rate} = \dfrac{\texttt{\# misses}}{\# memory accesses}
\end{equation*}
Finally we define the \definition{Miss Time} as
\begin{equation*}
    \texttt{Miss Time} = \texttt{Hit Time} + \texttt{Miss Penalty}
\end{equation*}
Where the \definition{Miss Penalty} is \textbf{the time needed to access the lower level and to replace the block in the upper level}.

\highspace
Two observations:
\begin{enumerate}
    \item Should be obviously the definition:
    \begin{equation*}
        \texttt{Hit Rate} + \texttt{Miss Rate} = 1
    \end{equation*}

    \item Typically, we have the following relation:
    \begin{equation*}
        \texttt{Hit Time} \ll \texttt{Miss Penalty}
    \end{equation*}
\end{enumerate}